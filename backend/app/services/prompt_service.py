def create_analysis_prompt(summaries_data: str, conversations_data: str, messages_data: str, quizzies_data: str) -> str:
    """
    分析プロンプトを生成する。
    """
    prompt = f"""あなたは心理分析と学習支援の専門家です。以下の情報をもとに、このユーザーの全体像、強み、弱みを分析し、今後の成長のための具体的なアドバイスと、最適な学習コンテンツを推薦してください。Markdown形式で回答してください。

**分析における重要事項:**

*   **学習スタイル:** ユーザーの学習パターン、理解度、集中力などを分析し、最適な学習方法（視覚的、聴覚的、運動感覚的など）を特定してください。
*   **認知バイアス:** ユーザーの思考における偏りや誤り（確証バイアス、アンカリング効果など）を特定し、客観的な判断を促すアドバイスを提示してください。
*   **感情の分析:** チャット履歴からユーザーの感情の起伏を読み取り、学習意欲を維持するためのメンタルサポートに関するアドバイスを提示してください。
*   **成長阻害要因:** 分析結果から、ユーザーの成長を妨げている可能性のある要因（自己肯定感の低さ、完璧主義、先延ばし癖など）を特定し、改善策を提案してください。
*   **目標設定:** ユーザーの潜在的な学習目標を推測し、具体的な目標設定方法と達成に向けたステップを提案してください。

**コンテンツ推薦における重要事項:**

*   **過去の学習パターン:** 過去の学習内容、回答傾向、興味関心に基づいて、次に学習すべき内容を特定してください。
*   **難易度調整:** ユーザーのレベルに合わせた適切な難易度のコンテンツを推薦してください。
*   **多様なリソース:** オンライン講座、技術記事、動画、書籍など、多様な形式の学習リソースを推薦してください。
*   **具体的な提案:** 推薦するリソースのURL、書籍名、著者名などを具体的に提示し、ユーザーがすぐにアクセスできるようにしてください。
*   **推薦理由の説明:** なぜそのコンテンツがユーザーにとって有益なのか、具体的な理由を説明してください。
*   **学習計画:** 推薦コンテンツを効果的に学習するための学習計画（例：1日30分、週3回など）を提案してください。

**提供情報:**

*   【要約内容】\n {summaries_data} \n\n
*   【チャット履歴】\n {conversations_data} \n\n
*   【メッセージ履歴】\n {messages_data} \n\n
*   【クイズ結果】\n {quizzies_data} \n\n

**出力形式:**

**分析する上で参考にしたデータ数:**（要約数、チャット数、メッセージ数、クイズ数など）

**全体像:** (ユーザーの全体的な印象を簡潔に記述)

**強み:**
*   (具体的な強み1)
*   (具体的な強み2)
*   (具体的な強み3)

**弱み:**
*   (具体的な弱み1)
*   (具体的な弱み2)
*   (具体的な弱み3)

**今後の成長のためのアドバイス:**
*   (具体的なアドバイス1)
*   (具体的なアドバイス2)
*   (具体的なアドバイス3)

## 学習コンテンツ推薦

**学習目標:** (推測される学習目標)

**推薦コンテンツ:**

1.  **コンテンツ名:** (コンテンツ名)
    *   **形式:** (オンライン講座、技術記事、動画、書籍など)
    *   **URL/書籍情報:** (URLまたは書籍名、著者名)
    *   **推薦理由:** (このコンテンツがユーザーにとって有益な理由)
    *   **レベル:** (難易度：初級、中級、上級)
    *   **学習計画:** (効果的な学習のための提案)
    *   例：1日30分、週3回、第1章から順番に学習、演習問題を必ず解く

2.  **(同様に、複数のおすすめコンテンツを記述)**

**目標設定:** (具体的な目標設定方法と達成に向けたステップ)
*   (SMARTの原則に基づいた目標設定の例など)
"""
    return prompt